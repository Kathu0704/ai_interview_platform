<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Candidates</title>
	<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
	<style>
		body { font-family: 'Poppins', sans-serif; background:#f8f9fa; color:#333; }
		.navbar { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color:#fff; padding:1rem 2rem; display:flex; justify-content:space-between; }
		.navbar a { color:#fff; text-decoration:none; margin-left:1rem; }
		.container { max-width: 1100px; margin: 0 auto; padding: 2rem; }
		.card { background:#fff; border-radius:12px; padding:1rem; margin-bottom:1rem; box-shadow: 0 5px 15px rgba(0,0,0,0.08); }
		.header { display:flex; justify-content:space-between; align-items:center; }
		.badge { padding:6px 12px; border-radius:16px; font-size:0.8rem; }
		.badge-scheduled { background:#e3f2fd; color:#1565c0; }
		.badge-completed { background:#d4edda; color:#155724; }
		.badge-cancelled { background:#f8d7da; color:#721c24; }
		.badge-no-show { background:#fff3cd; color:#856404; }
		.small { color:#666; font-size:0.9rem; }
		.link { color:#1565c0; text-decoration:none; }
		.link:hover { text-decoration:underline; }
	</style>
</head>
<body>
	<nav class="navbar">
		<div>Candidates</div>
		<div>
			<a href="{% url 'hr_dashboard' %}"><i class="fas fa-home"></i> Dashboard</a>
		</div>
	</nav>
	<div class="container">
		{% if candidates %}
			{% for cid, info in candidates.items %}
				{% with u=info.user p=profiles.cid %}
				<div class="card">
					<div class="header">
						<div>
							<strong>{{ u.get_full_name|default:u.username }}</strong>
							<div class="small">{{ u.get_full_name|default:u.username }}</div>
						</div>
						<div>
							{% if p and p.resume %}
								<a class="link" href="{{ p.resume.url }}" target="_blank"><i class="fas fa-file"></i> View Resume</a>
							{% endif %}
						</div>
					</div>
					<hr>
					<div>
						{% for b in info.bookings %}
							<div style="margin-bottom:8px;">
								<span class="small"><i class="fas fa-calendar"></i> {{ b.time_slot.date|date:"M d, Y" }} | {{ b.time_slot.start_time|time:"g:i A" }} - {{ b.time_slot.end_time|time:"g:i A" }} | {{ b.designation }}</span>
								{% if b.status == 'scheduled' %}<span class="badge badge-scheduled">Scheduled</span>{% endif %}
								{% if b.status == 'completed' %}<span class="badge badge-completed">Completed</span>{% endif %}
								{% if b.status == 'cancelled' %}<span class="badge badge-cancelled">Cancelled</span>{% endif %}
								{% if b.status == 'no_show' %}<span class="badge badge-no-show">No Show</span>{% endif %}
							</div>
						{% endfor %}
					</div>
				</div>
				{% endwith %}
			{% endfor %}
		{% else %}
			<p>No candidates yet.</p>
		{% endif %}
	</div>
</body>
</html>
